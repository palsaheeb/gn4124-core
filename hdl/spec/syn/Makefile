########################################
#  This file was generated by hdlmake  #
#  http://ohwr.org/projects/hdl-make/  #
########################################

PROJECT := spec_gn4124_test.xise
ISE_CRAP := *.b spec_gn4124_test_summary.html *.tcl spec_gn4124_test.bld spec_gn4124_test.cmd_log *.drc spec_gn4124_test.lso *.ncd spec_gn4124_test.ngc spec_gn4124_test.ngd spec_gn4124_test.ngr spec_gn4124_test.pad spec_gn4124_test.par spec_gn4124_test.pcf spec_gn4124_test.prj spec_gn4124_test.ptwx spec_gn4124_test.stx spec_gn4124_test.syr spec_gn4124_test.twr spec_gn4124_test.twx spec_gn4124_test.gise spec_gn4124_test.unroutes spec_gn4124_test.ut spec_gn4124_test.xpi spec_gn4124_test.xst spec_gn4124_test_bitgen.xwbt spec_gn4124_test_envsettings.html spec_gn4124_test_guide.ncd spec_gn4124_test_map.map spec_gn4124_test_map.mrp spec_gn4124_test_map.ncd spec_gn4124_test_map.ngm spec_gn4124_test_map.xrpt spec_gn4124_test_ngdbuild.xrpt spec_gn4124_test_pad.csv spec_gn4124_test_pad.txt spec_gn4124_test_par.xrpt spec_gn4124_test_summary.xml spec_gn4124_test_usage.xml spec_gn4124_test_xst.xrpt usage_statistics_webtalk.html webtalk.log webtalk_pn.xml run.tcl

#target for performing local synthesis
local:
		echo "project open $(PROJECT)" > run.tcl
		echo "process run {Generate Programming File} -force rerun_all" >> run.tcl
		xtclsh run.tcl


#target for cleaing all intermediate stuff
clean:
		rm -f $(ISE_CRAP)
		rm -rf xst xlnx_auto_*_xdb iseconfig _xmsgs _ngo
    
#target for cleaning final files
mrproper:
		rm -f *.bit *.bin *.mcs

USER:=$(HDLMAKE_USER)#take the value from the environment
SERVER:=$(HDLMAKE_SERVER)#take the value from the environment
R_NAME:=spec_gn4124_test

__test_for_remote_synthesis_variables:
ifeq (x$(USER),x)
	@echo "Remote synthesis user is not set. You can set it by editing variable USER in the makefile." && false
endif
ifeq (x$(SERVER),x)
	@echo "Remote synthesis server is not set. You can set it by editing variable SERVER in the makefile." && false
endif

CWD := $(shell pwd)

FILES := ../spec_gn4124_test.ucf \
../ip_cores/l2p_fifo.ngc \
../rtl/spec_gn4124_test.vhd \
../../common/rtl/dummy_ctrl_regs.vhd \
../../common/rtl/dummy_stat_regs.vhd \
../../common/rtl/wb_addr_decoder.vhd \
../../gn4124core/rtl/dma_controller.vhd \
../../gn4124core/rtl/dma_controller_wb_slave.vhd \
../../gn4124core/rtl/l2p_arbiter.vhd \
../../gn4124core/rtl/l2p_dma_master.vhd \
../../gn4124core/rtl/p2l_decode32.vhd \
../../gn4124core/rtl/p2l_dma_master.vhd \
../../gn4124core/rtl/wbmaster32.vhd \
../../gn4124core/rtl/spartan6/gn4124_core.vhd \
../../gn4124core/rtl/spartan6/gn4124_core_pkg.vhd \
../../gn4124core/rtl/spartan6/l2p_ser.vhd \
../../gn4124core/rtl/spartan6/p2l_des.vhd \
../../gn4124core/rtl/spartan6/serdes_1_to_n_clk_pll_s2_diff.vhd \
../../gn4124core/rtl/spartan6/serdes_1_to_n_data_s2_se.vhd \
../../gn4124core/rtl/spartan6/serdes_n_to_1_s2_diff.vhd \
../../gn4124core/rtl/spartan6/serdes_n_to_1_s2_se.vhd \
../../gn4124core/rtl/spartan6/pulse_sync_rtl.vhd \
../ip_cores/general-cores/modules/common/gencores_pkg.vhd \
../ip_cores/general-cores/modules/common/gc_crc_gen.vhd \
../ip_cores/general-cores/modules/common/gc_moving_average.vhd \
../ip_cores/general-cores/modules/common/gc_extend_pulse.vhd \
../ip_cores/general-cores/modules/common/gc_delay_gen.vhd \
../ip_cores/general-cores/modules/common/gc_dual_pi_controller.vhd \
../ip_cores/general-cores/modules/common/gc_reset.vhd \
../ip_cores/general-cores/modules/common/gc_serial_dac.vhd \
../ip_cores/general-cores/modules/common/gc_sync_ffs.vhd \
../ip_cores/general-cores/modules/common/gc_arbitrated_mux.vhd \
../ip_cores/general-cores/modules/common/gc_pulse_synchronizer.vhd \
../ip_cores/general-cores/modules/common/gc_pulse_synchronizer2.vhd \
../ip_cores/general-cores/modules/common/gc_frequency_meter.vhd \
../ip_cores/general-cores/modules/common/gc_rr_arbiter.vhd \
../ip_cores/general-cores/modules/common/gc_prio_encoder.vhd \
../ip_cores/general-cores/modules/common/gc_word_packer.vhd \
../ip_cores/general-cores/modules/common/gc_i2c_slave.vhd \
../ip_cores/general-cores/modules/common/gc_glitch_filt.vhd \
../ip_cores/general-cores/modules/common/gc_dyn_glitch_filt.vhd \
../ip_cores/general-cores/modules/common/gc_big_adder.vhd \
../ip_cores/general-cores/modules/common/gc_fsm_watchdog.vhd \
../ip_cores/general-cores/modules/common/gc_bicolor_led_ctrl.vhd \
../ip_cores/general-cores/modules/genrams/genram_pkg.vhd \
../ip_cores/general-cores/modules/genrams/memory_loader_pkg.vhd \
../ip_cores/general-cores/modules/genrams/generic_shiftreg_fifo.vhd \
../ip_cores/general-cores/modules/genrams/inferred_sync_fifo.vhd \
../ip_cores/general-cores/modules/genrams/inferred_async_fifo.vhd \
../ip_cores/general-cores/modules/wishbone/wishbone_pkg.vhd \
../ip_cores/general-cores/modules/genrams/xilinx/generic_dpram.vhd \
../ip_cores/general-cores/modules/genrams/xilinx/generic_dpram_sameclock.vhd \
../ip_cores/general-cores/modules/genrams/xilinx/generic_dpram_dualclock.vhd \
../ip_cores/general-cores/modules/genrams/xilinx/generic_simple_dpram.vhd \
../ip_cores/general-cores/modules/genrams/xilinx/generic_spram.vhd \
../ip_cores/general-cores/modules/genrams/xilinx/gc_shiftreg.vhd \
../ip_cores/general-cores/modules/genrams/generic/generic_async_fifo.vhd \
../ip_cores/general-cores/modules/genrams/generic/generic_sync_fifo.vhd \
../ip_cores/general-cores/modules/wishbone/wb_async_bridge/wb_async_bridge.vhd \
../ip_cores/general-cores/modules/wishbone/wb_async_bridge/xwb_async_bridge.vhd \
../ip_cores/general-cores/modules/wishbone/wb_onewire_master/wb_onewire_master.vhd \
../ip_cores/general-cores/modules/wishbone/wb_onewire_master/xwb_onewire_master.vhd \
../ip_cores/general-cores/modules/wishbone/wb_onewire_master/sockit_owm.v \
../ip_cores/general-cores/modules/wishbone/wb_i2c_master/i2c_master_bit_ctrl.vhd \
../ip_cores/general-cores/modules/wishbone/wb_i2c_master/i2c_master_byte_ctrl.vhd \
../ip_cores/general-cores/modules/wishbone/wb_i2c_master/i2c_master_top.vhd \
../ip_cores/general-cores/modules/wishbone/wb_i2c_master/wb_i2c_master.vhd \
../ip_cores/general-cores/modules/wishbone/wb_i2c_master/xwb_i2c_master.vhd \
../ip_cores/general-cores/modules/wishbone/wb_bus_fanout/xwb_bus_fanout.vhd \
../ip_cores/general-cores/modules/wishbone/wb_dpram/xwb_dpram.vhd \
../ip_cores/general-cores/modules/wishbone/wb_gpio_port/wb_gpio_port.vhd \
../ip_cores/general-cores/modules/wishbone/wb_gpio_port/xwb_gpio_port.vhd \
../ip_cores/general-cores/modules/wishbone/wb_simple_timer/wb_tics.vhd \
../ip_cores/general-cores/modules/wishbone/wb_simple_timer/xwb_tics.vhd \
../ip_cores/general-cores/modules/wishbone/wb_uart/uart_async_rx.vhd \
../ip_cores/general-cores/modules/wishbone/wb_uart/uart_async_tx.vhd \
../ip_cores/general-cores/modules/wishbone/wb_uart/uart_baud_gen.vhd \
../ip_cores/general-cores/modules/wishbone/wb_uart/simple_uart_wb.vhd \
../ip_cores/general-cores/modules/wishbone/wb_uart/simple_uart_pkg.vhd \
../ip_cores/general-cores/modules/wishbone/wb_uart/wb_simple_uart.vhd \
../ip_cores/general-cores/modules/wishbone/wb_uart/xwb_simple_uart.vhd \
../ip_cores/general-cores/modules/wishbone/wb_vic/vic_prio_enc.vhd \
../ip_cores/general-cores/modules/wishbone/wb_vic/wb_slave_vic.vhd \
../ip_cores/general-cores/modules/wishbone/wb_vic/wb_vic.vhd \
../ip_cores/general-cores/modules/wishbone/wb_vic/xwb_vic.vhd \
../ip_cores/general-cores/modules/wishbone/wb_spi/spi_clgen.v \
../ip_cores/general-cores/modules/wishbone/wb_spi/spi_shift.v \
../ip_cores/general-cores/modules/wishbone/wb_spi/spi_top.v \
../ip_cores/general-cores/modules/wishbone/wb_spi/wb_spi.vhd \
../ip_cores/general-cores/modules/wishbone/wb_spi/xwb_spi.vhd \
../ip_cores/general-cores/modules/wishbone/wb_crossbar/sdb_rom.vhd \
../ip_cores/general-cores/modules/wishbone/wb_crossbar/xwb_crossbar.vhd \
../ip_cores/general-cores/modules/wishbone/wb_crossbar/xwb_sdb_crossbar.vhd \
../ip_cores/general-cores/modules/wishbone/wb_crossbar/xwb_register_link.vhd \
../ip_cores/general-cores/modules/wishbone/wb_irq/wb_irq_timer.vhd \
../ip_cores/general-cores/modules/wishbone/wb_irq/irqm_core.vhd \
../ip_cores/general-cores/modules/wishbone/wb_irq/wb_irq_lm32.vhd \
../ip_cores/general-cores/modules/wishbone/wb_irq/wb_irq_slave.vhd \
../ip_cores/general-cores/modules/wishbone/wb_irq/wb_irq_master.vhd \
../ip_cores/general-cores/modules/wishbone/wb_irq/wb_irq_pkg.vhd \
../ip_cores/general-cores/modules/wishbone/wb_lm32/generated/xwb_lm32.vhd \
../ip_cores/general-cores/modules/wishbone/wb_lm32/generated/lm32_allprofiles.v \
../ip_cores/general-cores/modules/wishbone/wb_lm32/src/lm32_mc_arithmetic.v \
../ip_cores/general-cores/modules/wishbone/wb_lm32/src/jtag_cores.v \
../ip_cores/general-cores/modules/wishbone/wb_lm32/src/lm32_adder.v \
../ip_cores/general-cores/modules/wishbone/wb_lm32/src/lm32_addsub.v \
../ip_cores/general-cores/modules/wishbone/wb_lm32/src/lm32_dp_ram.vhd \
../ip_cores/general-cores/modules/wishbone/wb_lm32/src/lm32_logic_op.v \
../ip_cores/general-cores/modules/wishbone/wb_lm32/src/lm32_ram.vhd \
../ip_cores/general-cores/modules/wishbone/wb_lm32/src/lm32_shifter.v \
../ip_cores/general-cores/modules/wishbone/wb_lm32/platform/spartan6/lm32_multiplier.v \
../ip_cores/general-cores/modules/wishbone/wb_lm32/platform/spartan6/jtag_tap.v \
../ip_cores/general-cores/modules/wishbone/wb_slave_adapter/wb_slave_adapter.vhd \
../ip_cores/general-cores/modules/wishbone/wb_clock_crossing/xwb_clock_crossing.vhd \
../ip_cores/general-cores/modules/wishbone/wb_dma/xwb_dma.vhd \
../ip_cores/general-cores/modules/wishbone/wb_dma/xwb_streamer.vhd \
../ip_cores/general-cores/modules/wishbone/wb_serial_lcd/wb_serial_lcd.vhd \
../ip_cores/general-cores/modules/wishbone/wb_spi_flash/wb_spi_flash.vhd \
../ip_cores/general-cores/modules/wishbone/wb_simple_pwm/simple_pwm_wbgen2_pkg.vhd \
../ip_cores/general-cores/modules/wishbone/wb_simple_pwm/simple_pwm_wb.vhd \
../ip_cores/general-cores/modules/wishbone/wb_simple_pwm/wb_simple_pwm.vhd \
../ip_cores/general-cores/modules/wishbone/wb_simple_pwm/xwb_simple_pwm.vhd \
../ip_cores/general-cores/modules/wishbone/wb_i2c_bridge/wb_i2c_bridge.vhd \
../ip_cores/general-cores/modules/wishbone/wbgen2/wbgen2_dpssram.vhd \
../ip_cores/general-cores/modules/wishbone/wbgen2/wbgen2_eic.vhd \
../ip_cores/general-cores/modules/wishbone/wbgen2/wbgen2_fifo_async.vhd \
../ip_cores/general-cores/modules/wishbone/wbgen2/wbgen2_fifo_sync.vhd \
../ip_cores/general-cores/modules/wishbone/wbgen2/wbgen2_pkg.vhd \
../ip_cores/general-cores/platform/xilinx/wb_xilinx_fpga_loader/wb_xilinx_fpga_loader.vhd \
../ip_cores/general-cores/platform/xilinx/wb_xilinx_fpga_loader/xwb_xilinx_fpga_loader.vhd \
../ip_cores/general-cores/platform/xilinx/wb_xilinx_fpga_loader/xloader_registers_pkg.vhd \
../ip_cores/general-cores/platform/xilinx/wb_xilinx_fpga_loader/xloader_wb.vhd \
../ip_cores/general-cores/platform/xilinx/wb_xil_multiboot/spi_master.vhd \
../ip_cores/general-cores/platform/xilinx/wb_xil_multiboot/multiboot_fsm.vhd \
../ip_cores/general-cores/platform/xilinx/wb_xil_multiboot/multiboot_regs.vhd \
../ip_cores/general-cores/platform/xilinx/wb_xil_multiboot/wb_xil_multiboot.vhd \
../ip_cores/general-cores/modules/wishbone/wb_spi/timescale.v \
../ip_cores/general-cores/modules/wishbone/wb_spi/spi_defines.v \
../ip_cores/general-cores/modules/wishbone/wb_lm32/src/lm32_include.v \
run.tcl \
spec_gn4124_test.xise

#target for running simulation in the remote location
remote: __test_for_remote_synthesis_variables __send __do_synthesis __send_back
__send_back: __do_synthesis
__do_synthesis: __send
__send: __test_for_remote_synthesis_variables

__send:
		ssh $(USER)@$(SERVER) 'mkdir -p $(R_NAME)'
		rsync -Rav $(foreach file, $(FILES), $(shell readlink -f $(file))) $(USER)@$(SERVER):$(R_NAME)

__do_synthesis:
		ssh $(USER)@$(SERVER) 'cd $(R_NAME)$(CWD) && xtclsh run.tcl'

__send_back: 
		cd .. && rsync -av $(USER)@$(SERVER):$(R_NAME)$(CWD) . && cd $(CWD)

#target for removing stuff from the remote location
cleanremote:
		ssh $(USER)@$(SERVER) 'rm -rf $(R_NAME)'

